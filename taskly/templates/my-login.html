{% load static %}
{% load crispy_forms_tags %}

<!DOCTYPE html>
<html>

    <head>

        <meta charset="utf-8" />

        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

        <link rel="stylesheet" type="text/css" href="https://bootswatch.com/5/solar/bootstrap.min.css">

        <link rel="stylesheet" type="text/css" href="{% static 'css/styles.css' %}">

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

        <title>Taskly | My Login</title>

    </head>

    {% include 'pre-base.html' %}

    <body>
        <div class="container bg-white shadow-md p-5 form-layout">

            <h3>Login</h3>

            <hr>
            
            <form method="POST" autocomplete="off">

                {% csrf_token %}

                {{ form.username|as_crispy_field }}

                <br>

                {{ form.password|as_crispy_field }}

                <br>

                <!--<input class="btn btn-primary navbar-btn" type="submit" value="Login" />-->

                <button class="btn btn-primary" type="submit"> <i class="fa fa-key" aria-hidden="true"></i> &nbsp; Login </button>

                <br>

                {% for message in messages %}

                    {% if message.level == DEFAULT_MESSAGE_LEVELS.SUCCESS %}

                        <p id="message-timer" class="alert alert-success float-center text-center message text">

                            <i class="fa fa-check" aria-hidden="true"></i> &nbsp; {{ message }}

                        </p>

                    {% endif %}

                {% endfor %}

                <br>

                <p>Don't have an account? <a href="{% url 'register' %}"> <br> Register</a></p>

            </form>

        </div>

        <br>

        <script src="{% static 'js/app.js' %}"></script>

        <script src="http://code.jquery.com/jquery-3.3.1.min.js" crossorigin="anonymous"></script>

        <script>

            // Hide Django flash message after a few seconds (give or take)
            
            document.addEventListener("DOMContentLoaded", function() {
                var messageTimeout = document.getElementById("message-timer");

                if (messageTimeout) {
                    setTimeout(function() {
                        messageTimeout.style.display = "none";
                    }, 5000);
                }
            });
        </script>
    </body>
</html>
